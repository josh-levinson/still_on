<div class="event-form">
  <div class="breadcrumb">
    <%= link_to "Groups", groups_path %> &gt; <%= link_to @group.name, group_path(@group.slug) %> &gt; <%= link_to @event.title, group_event_path(@group.slug, @event) %> &gt; Edit
  </div>

  <h1>Edit Event</h1>

  <%= form_with model: [@group, @event], local: true do |f| %>
    <% if @event.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@event.errors.count, "error") %> prohibited this event from being saved:</h2>
        <ul>
          <% @event.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :title %>
      <%= f.text_field :title, required: true, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :description %>
      <%= f.text_area :description, rows: 4, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :location, "Default Location" %>
      <%= f.text_field :location, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :default_duration_minutes, "Default Duration (minutes)" %>
      <%= f.number_field :default_duration_minutes, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :recurrence_type, "Recurrence" %>
      <%= f.select :recurrence_type,
          [["Does not repeat", "none"], ["Daily", "daily"], ["Weekly", "weekly"], ["Monthly", "monthly"]],
          {},
          class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :recurrence_rule, "Recurrence Rule (advanced)" %>
      <%= f.text_field :recurrence_rule, class: "form-control", placeholder: "e.g., FREQ=WEEKLY;BYDAY=MO,WE,FR" %>
      <small class="form-text">Optional: RFC 5545 recurrence rule format</small>
    </div>

    <div class="form-group">
      <%= f.label :is_active, "Active" %>
      <%= f.check_box :is_active %>
    </div>

    <div class="form-actions">
      <%= f.submit "Update Event", class: "btn btn-primary" %>
      <%= link_to "Cancel", group_event_path(@group.slug, @event), class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
